{"ast":null,"code":"import _defineProperty from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/cameronking/Desktop/duke-eats/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/cameronking/Desktop/duke-eats/src/components/Account/name.js\";\nimport React, { Component } from 'react';\nimport { withFirebase } from '../Firebase';\nimport './../../vendor/changed.css';\n\nvar NameChangeForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NameChangeForm, _Component);\n\n  function NameChangeForm(props) {\n    var _this;\n\n    _classCallCheck(this, NameChangeForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NameChangeForm).call(this, props));\n\n    _this.onSubmit = function (event) {\n      var _this$state = _this.state,\n          name = _this$state.name,\n          uid = _this$state.uid;\n\n      var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n      _this.props.firebase.db.ref('users/' + uid + '/username').set(name).then(function () {\n        self.getName();\n      }).catch(function (error) {\n        _this.setState({\n          error: error\n        });\n      });\n\n      _this.setState({\n        submitted: true\n      });\n\n      event.preventDefault();\n    };\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.state = {\n      error: null,\n      uid: _this.props.firebase.auth.currentUser.uid,\n      name: '',\n      submitted: false\n    };\n    return _this;\n  }\n\n  _createClass(NameChangeForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getName();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      var uid = this.state.uid;\n      var self = this;\n      this.props.firebase.user(uid).once('value').then(function (snapshot) {\n        var n = snapshot.val().username;\n        self.setState({\n          name: n\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          name = _this$state2.name,\n          error = _this$state2.error,\n          submitted = _this$state2.submitted;\n      var isInvalid = name === '';\n      return React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        className: \"form-inline d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"name\",\n        value: name,\n        className: \"form-control flex-fill mr-0 mr-sm-2 mb-3 mb-sm-0\",\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        disabled: isInvalid,\n        type: \"submit\",\n        className: \"btn btn-light mx-auto custom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Change My Name\"), error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, error.message), submitted && React.createElement(\"h2\", {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Name Changed\"));\n    }\n  }]);\n\n  return NameChangeForm;\n}(Component);\n\nexport default withFirebase(NameChangeForm);","map":{"version":3,"sources":["/Users/cameronking/Desktop/duke-eats/src/components/Account/name.js"],"names":["React","Component","withFirebase","NameChangeForm","props","onSubmit","event","state","name","uid","self","firebase","db","ref","set","then","getName","catch","error","setState","submitted","preventDefault","onChange","target","value","auth","currentUser","user","once","snapshot","n","val","username","isInvalid","message","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withFirebase } from '../Firebase';\nimport './../../vendor/changed.css';\n  \n  class NameChangeForm extends Component {\n    constructor(props) {\n      super(props);\n  \n      this.state = { \n        error: null,\n        uid: this.props.firebase.auth.currentUser.uid,\n        name: '',\n        submitted: false,\n      };\n    }\n    \n    componentDidMount() {\n        this.getName();\n    }\n\n    getName(){\n        const { uid } = this.state;\n        const self = this;\n        this.props.firebase.user(uid).once('value').then(function(snapshot) {\n            const n = snapshot.val().username;\n            self.setState({ name: n });\n        })\n    }\n\n    onSubmit = event => {\n      const { name, uid } = this.state;\n      const self = this;\n      this.props.firebase\n        .db.ref('users/' + uid + '/username').set(\n            name\n        ) \n        .then(() => {\n          self.getName();\n        })\n        .catch(error => {\n          this.setState({ error });\n        });\n      this.setState({ submitted: true })\n      event.preventDefault();\n    };\n  \n    onChange = event => {\n      this.setState({ [event.target.name]: event.target.value });\n    };\n  \n    render() {\n      const { name, error, submitted } = this.state;\n      const isInvalid =\n        name === '';\n      return (\n        <form onSubmit={this.onSubmit} className=\"form-inline d-flex\">\n          <input\n            name=\"name\"\n            value={name}\n            className=\"form-control flex-fill mr-0 mr-sm-2 mb-3 mb-sm-0\"\n            onChange={this.onChange}\n            type=\"text\"\n            placeholder= {name}\n          />\n          <button disabled={isInvalid} type=\"submit\" className=\"btn btn-light mx-auto custom\">\n            Change My Name\n          </button> \n  \n          {error && <p>{error.message}</p>}\n          {submitted && <h2 style={{ color: 'white' }}>Name Changed</h2>}\n        </form>\n      );\n    }\n  }\n  \n  export default withFirebase(NameChangeForm);"]},"metadata":{},"sourceType":"module"}